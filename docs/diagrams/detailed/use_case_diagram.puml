@startuml

title Diagramme de Cas d'Utilisation Détaillé

left to right direction
skinparam packageStyle rectangle

' Acteurs
actor "Locataire" as Tenant #LightBlue
actor "Propriétaire" as Landlord #LightGreen
actor "Administrateur" as Admin #Pink
actor "Blockchain\nEthereum" as Blockchain #LightYellow

rectangle "Système de Gestion Locative Blockchain" {
  
  package "Authentification et Profil" #E3F2FD {
    usecase "S'inscrire avec KYC" as UC1
    usecase "Se connecter" as UC2
    usecase "Se déconnecter" as UC3
    usecase "Gérer son profil" as UC4
    usecase "Modifier adresse blockchain" as UC5
  }
  
  package "Gestion des Propriétés" #E8F5E9 {
    usecase "Créer une propriété" as UC6
    usecase "Modifier une propriété" as UC7
    usecase "Supprimer une propriété" as UC8
    usecase "Consulter les propriétés" as UC9
    usecase "Rechercher une propriété" as UC10
    usecase "Uploader photos" as UC11
  }
  
  package "Gestion des Contrats" #FFF3E0 {
    usecase "Créer un contrat" as UC12
    usecase "Signer un contrat" as UC13
    usecase "Consulter les contrats" as UC14
    usecase "Voir détails du contrat" as UC15
    usecase "Résilier un contrat" as UC16
    usecase "Déployer smart contract" as UC17
  }
  
  package "Gestion des Paiements" #F3E5F5 {
    usecase "Effectuer un paiement" as UC18
    usecase "Consulter historique paiements" as UC19
    usecase "Calculer les pénalités" as UC20
    usecase "Retirer des fonds" as UC21
    usecase "Consulter paiements à venir" as UC22
    usecase "Vérifier transaction blockchain" as UC23
  }
  
  package "Gestion des Litiges" #FFEBEE {
    usecase "Déposer un litige" as UC24
    usecase "Consulter les litiges" as UC25
    usecase "Résoudre un litige" as UC26
    usecase "Suivre état d'un litige" as UC27
    usecase "Enregistrer sur blockchain" as UC28
  }
  
  package "Dashboard et Statistiques" #E0F2F1 {
    usecase "Voir tableau de bord" as UC29
    usecase "Consulter statistiques" as UC30
    usecase "Recevoir notifications" as UC31
  }
}

' Relations Locataire
Tenant --> UC1
Tenant --> UC2
Tenant --> UC3
Tenant --> UC4
Tenant --> UC5
Tenant --> UC9
Tenant --> UC10
Tenant --> UC13
Tenant --> UC14
Tenant --> UC15
Tenant --> UC18
Tenant --> UC19
Tenant --> UC22
Tenant --> UC24
Tenant --> UC25
Tenant --> UC27
Tenant --> UC29
Tenant --> UC30
Tenant --> UC31

' Relations Propriétaire
Landlord --> UC1
Landlord --> UC2
Landlord --> UC3
Landlord --> UC4
Landlord --> UC5
Landlord --> UC6
Landlord --> UC7
Landlord --> UC8
Landlord --> UC9
Landlord --> UC10
Landlord --> UC11
Landlord --> UC12
Landlord --> UC13
Landlord --> UC14
Landlord --> UC15
Landlord --> UC16
Landlord --> UC19
Landlord --> UC21
Landlord --> UC24
Landlord --> UC25
Landlord --> UC27
Landlord --> UC29
Landlord --> UC30
Landlord --> UC31

' Relations Administrateur
Admin --> UC2
Admin --> UC9
Admin --> UC14
Admin --> UC25
Admin --> UC26

' Relations Blockchain
UC17 ..> Blockchain : utilise
UC18 ..> Blockchain : utilise
UC23 ..> Blockchain : utilise
UC28 ..> Blockchain : utilise

' Dépendances entre cas d'utilisation
UC6 .> UC11 : <<include>>
UC7 .> UC11 : <<include>>
UC12 .> UC6 : <<require>>
UC12 .> UC17 : <<include>>
UC13 .> UC12 : <<require>>
UC16 .> UC13 : <<require>>
UC18 .> UC13 : <<require>>
UC18 .> UC20 : <<include>>
UC18 .> UC23 : <<include>>
UC24 .> UC13 : <<require>>
UC24 .> UC28 : <<include>>
UC26 .> UC28 : <<include>>

note right of UC17
  Déploie automatiquement:
  - RentalContract
  - PaymentManager
  - DisputeManager
end note

note bottom of UC18
  Paiement via MetaMask
  Transaction enregistrée
  sur la blockchain
end note

@enduml
